sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/ValueState","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/core/Fragment"],function(e,t,a,s,i){"use strict";return e.extend("ACRUD.Assignment_CRUD.controller.view2",{onInit:function(){this.getView().byId("employeelist").bindElement("/EMPLOYEESet('Empno')");this.oRouter=new sap.ui.core.UIComponent.getRouterFor(this)},onClickItems:function(e){debugger;var t=e.getParameter("listItem").getBindingContextPath();this.getView().bindElement(t)},onNavBack:function(){debugger;this.oRouter.navTo("RouteView1")},onEdit:function(){debugger;var e=this.getView().byId("empTextId").getValue();if(e===""||e===undefined){a.error("Please enter Employee Number")}else{var t=this;var e=this.getView().byId("empTextId").getValue();if(e!==""){this.getOwnerComponent().getModel().read("/EMPLOYEESet",{success:function(i,r){var n=false;for(var d=0;d<i.results.length;d++){if(i.results[d].Empno===e){n=true}}if(n){this.getOwnerComponent().getModel().read("/EMPLOYEESet('"+e+"')",{success:function(e,a){var i=new s;i.setData(e);t.getView().setModel(i,"oModel_EMPUpdate");t.getView().getModel("oModel_EMPUpdate").refresh()}.bind(this),error:function(e){}.bind(this)});this.getView().byId("empNameLabelU").setVisible(true);this.getView().byId("empNameInputU").setVisible(true);this.getView().byId("empNoLabelU").setVisible(true);this.getView().byId("empNoInputU").setVisible(true);this.getView().byId("idUpdate").setEnabled(true)}else{a.error("Record with this Employee ID doesn't exists. Please select an existing value");this.getView().byId("empNameLabelU").setVisible(false);this.getView().byId("empNameInputU").setVisible(false);this.getView().byId("empNoLabelU").setVisible(false);this.getView().byId("empNoInputU").setVisible(false);this.getView().byId("idUpdate").setEnabled(false)}}.bind(this),error:function(e){}.bind(this)})}}},createDetailsinMaster:function(){debugger;if(!this.Frgament){var e=this.createId("X");this.Frgament=new sap.ui.xmlfragment(e,"ACRUD.Assignment_CRUD.Fragments.CreateForm",this);this.getView().addDependent(this.Fragment)}this.Frgament.open()},onCloses:function(){debugger;var e=this.createId("X");var t=sap.ui.core.Fragment.byId(e,"empIDC");t.setValue("");var a=sap.ui.core.Fragment.byId(e,"empNameC");a.setValue("");this.Frgament.close()},CreateDetails:function(){debugger;var e=this.createId("X");var t=sap.ui.core.Fragment.byId(e,"empIDC").getValue();var s=sap.ui.core.Fragment.byId(e,"empNameC").getValue();var i=sap.ui.core.Fragment.byId(e,"typeOfd").getSelectedItem();var r=sap.ui.core.Fragment.byId(e,"typeOfd").getSelectedItem().getKey();if(t===""||t===undefined||s===""||s===undefined||r===""||r===undefined){a.error("Please enter mandatory details")}else{this.getOwnerComponent().getModel().read("/EMPLOYEESet",{success:function(e,i){var r=false;var n="";for(var d=0;d<e.results.length;d++){if(e.results[d].Empno===t){r=true;n="ID";break}else if(e.results[d].Empname===s){r=true;n=n+"Name";break}}if(r){a.error("Record with the same "+n+" already exists. Please select a unique value")}else{this.commonFunc()}}.bind(this),error:function(e){}.bind(this)})}},updateDetails:function(){debugger;var e=this.getView().byId("empTextId").getValue();var t=this.getView().byId("setTextId").getValue();var s=this.getView().byId("setDesintionId").getValue();var i={Empno:e,Empname:t,Empdesig:s};var r=this.getView().byId("setTextId").setText(t);var n=this.getView().byId("setDesintionId").setText(s);this.getOwnerComponent().getModel().update("/EMPLOYEESet('"+e+"')",i,{method:"PUT",success:function(e,t){if(e!==""||e!==undefined){a.success("Updated successfully.")}else{a.error("Not updated.")}},error:function(e,t){}})},deleteDetails:function(){debugger;var e=this.getView().byId("empTextId").getText();if(e===""||e===undefined){a.error("Please enter Employee ID to delete the record.")}this.getOwnerComponent().getModel().remove("/EMPLOYEESet('"+e+"')",{method:"DELETE",success:function(e,t){if(e!==""||e!==undefined){a.success("Deleted successfully.")}else{a.error("Not able to delete.")}},error:function(e,t){}})},onLiveChangeCreateID:function(e){debugger;var a=/^[0-9]*$/;var s=e.mParameters.value;var i=this.createId("X");var r=sap.ui.core.Fragment.byId(i,"empIDC");if(s===""||s===undefined||s.match(a)===null){r.setValueState(t.Error);r.setValueStateText("Please enter a numeric value. Limited to 3 digits");r.setValue("")}else{r.setValueState(t.None)}},onLiveChangeCreateName:function(e){debugger;var a=/^[A-Za-z]*$/;var s=e.mParameters.value;var i=this.createId("X");var r=sap.ui.core.Fragment.byId(i,"empNameC");if(s===""||s===undefined||s.match(a)===null){r.setValueState(t.Error);r.setValueStateText("Please enter charecters. Limited to 15 characters");this.getView().byId("empNameC").setValue("");r.setValue("")}else{r.setValueState(t.None)}},onLiveChangeCreateNum:function(e){debugger;var a=/^[a-zA-Z]*$/;var s=e.mParameters.value;var i=this.createId("X");var r=sap.ui.core.Fragment.byId(i,"empNumC");if(s===""||s===undefined||s.match(a)===null){r.setValueState(t.Error)}else{r.setValueState(t.None)}},commonFunc:function(){debugger;var e=this.createId("X");var t=sap.ui.core.Fragment.byId(e,"empIDC").getValue();var s=sap.ui.core.Fragment.byId(e,"empNameC").getValue();var i=sap.ui.core.Fragment.byId(e,"typeOfd").getSelectedItem();var r=sap.ui.core.Fragment.byId(e,"typeOfd").getSelectedItem().getKey();var n={Empno:t,Empname:s,Empdesig:r};this.getOwnerComponent().getModel().create("/EMPLOYEESet",n,{success:function(e,t){if(e!==""||e!==undefined){a.success("Created successfully.")}else{a.error("New entry not created.")}},error:function(e,t){}});this.Frgament.close();var t=sap.ui.core.Fragment.byId(e,"empIDC");t.setValue("");var s=sap.ui.core.Fragment.byId(e,"empNameC");s.setValue("")},onNext:function(){debugger;this.oRouter.navTo("RouteView3")},open:function(e){debugger;this._getDialog().open();var t=this.getView().byId("empTextId").getText();var a=sap.ui.getCore().byId("idFragment--empTextId3");a.setValue(t);var s=this.getView().byId("setTextId").getText();var i=sap.ui.getCore().byId("idFragment--setTextId3");i.setValue(s);var r=this.getView().byId("setDesintionId").getText();var n=sap.ui.getCore().byId("idFragment--setDesintionId3");n.setValue(r)},_getDialog:function(){debugger;if(!this.dialog){this.dialog=sap.ui.xmlfragment("idFragment","ACRUD.Assignment_CRUD.Fragments.updateForm",this)}return this.dialog},onClosesUpdate:function(){debugger;this._getDialog().close()},onSaveUpdate:function(){debugger;var e=sap.ui.getCore().byId("idFragment--empTextId3").getValue();var t=sap.ui.getCore().byId("idFragment--setTextId3").getValue();var s=sap.ui.getCore().byId("idFragment--setDesintionId3").getValue();var i={Empno:e,Empname:t,Empdesig:s};var r=this.getView().byId("setTextId").setText(t);var n=this.getView().byId("setDesintionId").setText(s);if(e===""||e===undefined||t===""||t===undefined||s===""||s===undefined){a.error("Please enter mandatory details")}else{this.getOwnerComponent().getModel().update("/EMPLOYEESet('"+e+"')",i,{method:"PUT",success:function(e,t){if(e!==""||e!==undefined){a.success("Updated successfully.")}else{a.error("Not updated.")}},error:function(e,t){}})}}})});